#
# @(#)Makefile	1.33 10/03/23
#
# Copyright (c) 2006, Oracle and/or its affiliates. All rights reserved.
# ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
#

#
# Re-compile .java files compiled with a bootstrap compiler with the
# current compiler in the source tree. This is so we always ship
# .class files generated by the latest compiler.
#

BUILDDIR = ../../../..
PACKAGE = java.lang
PRODUCT = java
include $(BUILDDIR)/common/Defs.gmk

#
# Files-to-compile
#

include $(BUILDDIR)/java/java/FILES_java.gmk
include $(BUILDDIR)/java/zip/FILES_java.gmk
FILES_java  = $(JAVA_JAVA_java) $(JAVA_ZIP_java)
ifeq ($(PLATFORM), windows)
FILES_java += $(TARGDIR)java/io/Win32FileSystem.java
else
FILES_java += $(TARGDIR)java/lang/UNIXProcess.java
FILES_java += $(TARGDIR)java/io/UnixFileSystem.java
endif

#
# Override destination directory
#

ALT_CLASSBINDIR   = $(TEMPDIR)/library/newclasses
ALT_CLASSDESTDIR := $(CLASSDESTDIR)
CLASSDESTDIR      = $(ALT_CLASSBINDIR)
CLASSBINDIR       = $(ALT_CLASSBINDIR)

# The javac classpath includes $(SHARE_SRC)/classes so that the build picks up
# the java.text.Normalizer classes, which for licensing reasons are checked
# into the source tree as class files.  The java/redist Makefile will already
# have copied these files into the true CLASSDESTDIR.

JAVAC_CP = "$(ALT_CLASSBINDIR)$(CLASSPATH_SEPARATOR)$(SHARE_SRC)/classes"

#
# Rules
#

include $(BUILDDIR)/common/Classes.gmk

# Don't leave old classes lying around in 'newclasses' !

clean clobber::
	$(RM) -r $(TEMPDIR)/library/newclasses
